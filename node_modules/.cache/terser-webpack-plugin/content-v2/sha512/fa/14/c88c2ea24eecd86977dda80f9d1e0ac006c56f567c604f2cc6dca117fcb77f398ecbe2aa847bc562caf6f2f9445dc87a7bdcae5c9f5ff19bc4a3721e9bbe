{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{269:function(e,t,a){\"use strict\";a.d(t,\"f\",(function(){return i})),a.d(t,\"i\",(function(){return s})),a.d(t,\"d\",(function(){return o})),a.d(t,\"c\",(function(){return r})),a.d(t,\"b\",(function(){return c})),a.d(t,\"a\",(function(){return l})),a.d(t,\"e\",(function(){return d})),a.d(t,\"g\",(function(){return u})),a.d(t,\"h\",(function(){return h}));var n=a(108);function i(e){return n.a.get(\"/goods/list\",{params:e})}function s(e){return n.a.post(\"/goods/status\",e)}function o(e){return n.a.post(\"/goods/del\",e)}function r(){return n.a.get(\"/goods/category/list\")}function c(e){return n.a.post(\"/goods/category/add\",e)}function l(e){return n.a.post(\"/goods/add\",e)}function d(e){return n.a.get(\"/goods/detail/\"+e)}function u(){return n.a.get(\"/goods/spec/list\")}function h(e){return n.a.post(\"/goods/spec/add\",e)}},515:function(e,t,a){\"use strict\";var n=a(165)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},767:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return f}));var n=a(2),i=a.n(n),s=a(5),o=a.n(s),r=a(19),c=a.n(r),l=a(0),d=a(4),u=a.n(d),h=a(56),m=a(50);function p(e){var t=e.className,a=e.direction,n=e.index,s=e.marginDirection,r=e.children,c=e.split,d=e.wrap,u=l.useContext(f),h=u.horizontalSize,m=u.verticalSize,p=u.latestIndex,g={};return\"vertical\"===a?n<p&&(g={marginBottom:h/(c?2:1)}):g=i()(i()({},n<p&&o()({},s,h/(c?2:1))),d&&{paddingBottom:m}),null==r?null:l.createElement(l.Fragment,null,l.createElement(\"div\",{className:t,style:g},r),n<p&&c&&l.createElement(\"span\",{className:\"\".concat(t,\"-split\"),style:g},c))}var g=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},f=l.createContext({latestIndex:0,horizontalSize:0,verticalSize:0}),v={small:8,middle:16,large:24};t.b=function(e){var t,a=l.useContext(m.b),n=a.getPrefixCls,s=a.space,r=a.direction,d=e.size,y=void 0===d?(null==s?void 0:s.size)||\"small\":d,b=e.align,E=e.className,w=e.children,S=e.direction,x=void 0===S?\"horizontal\":S,C=e.prefixCls,O=e.split,N=e.style,k=e.wrap,j=void 0!==k&&k,z=g(e,[\"size\",\"align\",\"className\",\"children\",\"direction\",\"prefixCls\",\"split\",\"style\",\"wrap\"]),I=l.useMemo((function(){return(Array.isArray(y)?y:[y,y]).map((function(e){return function(e){return\"string\"==typeof e?v[e]:e||0}(e)}))}),[y]),_=c()(I,2),L=_[0],R=_[1],K=Object(h.a)(w,{keepEmpty:!0});if(0===K.length)return null;var P=void 0===b&&\"horizontal\"===x?\"center\":b,T=n(\"space\",C),D=u()(T,\"\".concat(T,\"-\").concat(x),(t={},o()(t,\"\".concat(T,\"-rtl\"),\"rtl\"===r),o()(t,\"\".concat(T,\"-align-\").concat(P),P),t),E),J=\"\".concat(T,\"-item\"),A=\"rtl\"===r?\"marginLeft\":\"marginRight\",B=0,F=K.map((function(e,t){return null!=e&&(B=t),l.createElement(p,{className:J,key:\"\".concat(J,\"-\").concat(t),direction:x,index:t,marginDirection:A,split:O,wrap:j},e)}));return l.createElement(\"div\",i()({className:D,style:i()(i()({},j&&{flexWrap:\"wrap\",marginBottom:-R}),N)},z),l.createElement(f.Provider,{value:{horizontalSize:L,verticalSize:R,latestIndex:B}},F))}},784:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"default\",(function(){return B}));var n=a(47),i=a(0),s=a.n(i),o=a(32),r=a(41),c=a(509),l=a(164),d=a(2),u=a.n(d),h=a(5),m=a.n(h),p=a(6),g=a(7),f=a(9),v=a(4),y=a.n(v),b=a(267),E=a(38),w=i.forwardRef((function(e,t){var a,n=e.prefixCls,s=void 0===n?\"rc-switch\":n,o=e.className,r=e.checked,c=e.defaultChecked,l=e.disabled,d=e.loadingIcon,u=e.checkedChildren,h=e.unCheckedChildren,m=e.onClick,v=e.onChange,w=e.onKeyDown,S=Object(f.a)(e,[\"prefixCls\",\"className\",\"checked\",\"defaultChecked\",\"disabled\",\"loadingIcon\",\"checkedChildren\",\"unCheckedChildren\",\"onClick\",\"onChange\",\"onKeyDown\"]),x=Object(b.a)(!1,{value:r,defaultValue:c}),C=Object(g.a)(x,2),O=C[0],N=C[1];function k(e,t){var a=O;return l||(N(a=e),null==v||v(a,t)),a}var j=y()(s,o,(a={},Object(p.a)(a,\"\".concat(s,\"-checked\"),O),Object(p.a)(a,\"\".concat(s,\"-disabled\"),l),a));return i.createElement(\"button\",Object.assign({},S,{type:\"button\",role:\"switch\",\"aria-checked\":O,disabled:l,className:j,ref:t,onKeyDown:function(e){e.which===E.a.LEFT?k(!1,e):e.which===E.a.RIGHT&&k(!0,e),null==w||w(e)},onClick:function(e){var t=k(!O,e);null==m||m(t,e)}}),d,i.createElement(\"span\",{className:\"\".concat(s,\"-inner\")},O?u:h))}));w.displayName=\"Switch\";var S=w,x=a(65),C=a.n(x),O=a(119),N=a(50),k=a(72),j=a(42),z=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},I=i.forwardRef((function(e,t){var a,n=e.prefixCls,s=e.size,o=e.loading,r=e.className,c=void 0===r?\"\":r,l=e.disabled,d=z(e,[\"prefixCls\",\"size\",\"loading\",\"className\",\"disabled\"]);Object(j.a)(\"checked\"in d||!(\"value\"in d),\"Switch\",\"`value` is not a valid prop, do you mean `checked`?\");var h=i.useContext(N.b),p=h.getPrefixCls,g=h.direction,f=i.useContext(k.b),v=p(\"switch\",n),b=i.createElement(\"div\",{className:\"\".concat(v,\"-handle\")},o&&i.createElement(C.a,{className:\"\".concat(v,\"-loading-icon\")})),E=y()((a={},m()(a,\"\".concat(v,\"-small\"),\"small\"===(s||f)),m()(a,\"\".concat(v,\"-loading\"),o),m()(a,\"\".concat(v,\"-rtl\"),\"rtl\"===g),a),c);return i.createElement(O.a,{insertExtraNode:!0},i.createElement(S,u()({},d,{prefixCls:v,className:E,disabled:l||o,ref:t,loadingIcon:b})))}));I.__ANT_SWITCH=!0,I.displayName=\"Switch\";var _=I,L=a(767),R=a(776),K=a(764),P=a(74),T=a(774),D=a(763),J=(a(515),a(269));const{Option:A}=c.a;class B extends i.Component{constructor(e){super(e),this.state={selectedRowKeys:[],text:\"\",name:\"\",dataSource:[],total:\"\",page:1},this.status=this.status.bind(this),this.putaway=this.putaway.bind(this),this.outaway=this.outaway.bind(this),this.onChangeText=this.onChangeText.bind(this),this.onSelectChange=this.onSelectChange.bind(this),this.onchangepageSize=this.onchangepageSize.bind(this)}componentDidMount(){this.goodsList({status:\"\"})}goodsList(e){return Object(n.a)(this,void 0,void 0,(function*(){try{const t=Object.assign({status:\"\",name:\"\",page:1,page_size:10,total:\"\"},e||[]),{data:a,total:n,current_page:i}=yield J.f(t);this.setState({dataSource:a,total:n,page:i})}catch(e){}}))}onChangeText(e){const t=e.target;if(t){const e=t.value;this.setState({name:e}),this.goodsList({name:e})}}status(e){this.setState({dataSource:[]},()=>{this.goodsList({status:e})})}onSelectChange(e){this.setState({selectedRowKeys:e})}edit(e){console.log(\" 编辑\")}deletes(e){return Object(n.a)(this,void 0,void 0,(function*(){yield J.d({id:e.id}),this.setState({dataSource:[]},()=>{this.goodsList({})})}))}onChangeStatus(e){return Object(n.a)(this,void 0,void 0,(function*(){const t=JSON.stringify([e.id]);1===e.status?(yield J.i({ids:t,status:2}),this.setState({dataSource:[]},()=>{this.goodsList({})}),l.b.error(\"上架成功\")):(yield J.i({ids:t,status:1}),this.setState({dataSource:[]},()=>{this.goodsList({})}),l.b.error(\"下架成功\"))}))}putaway(){return Object(n.a)(this,void 0,void 0,(function*(){const{selectedRowKeys:e}=this.state,t=JSON.stringify(e);yield J.i({ids:t,status:1}),this.setState({dataSource:[]},()=>{this.goodsList({})})}))}outaway(){return Object(n.a)(this,void 0,void 0,(function*(){const{selectedRowKeys:e}=this.state,t=JSON.stringify(e);yield J.i({ids:t,status:2}),this.setState({dataSource:[]},()=>{this.goodsList({})})}))}onchangepageSize(e){this.setState({dataSource:[]},()=>{this.goodsList({page:e})})}render(){const{selectedRowKeys:e}=this.state,t={selectedRowKeys:e,onChange:this.onSelectChange},a=[{title:\"商品名称\",dataIndex:\"name\"},{title:\"上下架状态\",dataIndex:\"status\",render:(e,t)=>s.a.createElement(_,{defaultChecked:1===t.status,onChange:()=>this.onChangeStatus(t)})},{title:\"创建时间\",dataIndex:\"created_at\"},{title:\"操作\",dataIndex:\"operation\",render:(e,t)=>s.a.createElement(L.b,{size:\"middle\"},s.a.createElement(o.b,{to:r.b.goods.edit+\"?id=\"+t.id},\"编辑\"),s.a.createElement(\"a\",{onClick:()=>this.deletes(t)},\"删除\"))}],n=[{title:\"规格名称\",dataIndex:\"name\"},{title:\"成本价\",dataIndex:\"cost_price\",render:e=>s.a.createElement(\"a\",null,\"￥\",e)},{title:\"原价\",dataIndex:\"original_price\",render:e=>s.a.createElement(\"a\",null,\"￥\",e)},{title:\"售价\",dataIndex:\"selling_price\",render:e=>s.a.createElement(\"a\",null,\"￥\",e)},{title:\"库存\",dataIndex:\"stock\"},{title:\"实际销量\",dataIndex:\"sales\"}];return s.a.createElement(\"div\",null,s.a.createElement(\"div\",null,s.a.createElement(R.a,null,s.a.createElement(\"div\",{className:\"dfx hed\"},s.a.createElement(\"div\",null,s.a.createElement(R.a.Item,{label:\"商品名称:\"},s.a.createElement(K.a,{placeholder:\"请输入商品名称\",value:this.state.name,onChange:this.onChangeText}))),s.a.createElement(\"div\",{className:\"pl20\"},s.a.createElement(R.a.Item,{label:\"状态:\"},s.a.createElement(c.a,{defaultValue:\"\",style:{width:120},onChange:this.status},s.a.createElement(A,{value:\"\"},\"全部\"),s.a.createElement(A,{value:\"1\"},\"上架\"),s.a.createElement(A,{value:\"2\"},\"下架\"))))))),s.a.createElement(\"div\",{className:\"dfx_jcsb mt20 pd20\"},s.a.createElement(\"div\",{className:\"dfx_jcsa\"},s.a.createElement(\"div\",null,s.a.createElement(P.a,{type:\"primary\",danger:!0,shape:\"round\",onClick:this.putaway},\"批量上架\")),s.a.createElement(\"div\",{className:\"ml10\"},s.a.createElement(P.a,{type:\"primary\",danger:!0,shape:\"round\",onClick:this.outaway},\"批量下架\"))),s.a.createElement(\"div\",{className:\"dfx_jcsa\"},s.a.createElement(\"div\",{className:\"ml10\"},s.a.createElement(o.b,{to:r.b.goods.create},s.a.createElement(P.a,{type:\"primary\",danger:!0,shape:\"round\"},\"新建\"))))),s.a.createElement(\"div\",{className:\"mt20\"},s.a.createElement(T.a,{rowSelection:t,expandable:{expandedRowRender:e=>s.a.createElement(\"div\",null,s.a.createElement(\"div\",null,s.a.createElement(T.a,{pagination:!1,columns:n,dataSource:e.goods_sku,rowKey:\"id\"}))),rowExpandable:e=>\"Not Expandable\"!==e.name},dataSource:this.state.dataSource,columns:a,pagination:!1,rowKey:\"id\"})),s.a.createElement(\"div\",{className:\"mt20 mb20\"},s.a.createElement(D.a,{total:this.state.total,showQuickJumper:!0,pageSize:10,onChange:this.onchangepageSize,showTotal:e=>`共 ${e} 条`})))}}}}]);","extractedComments":[]}