{"map":"{\"version\":3,\"sources\":[\"15.js\"],\"names\":[\"window\",\"push\",\"768\",\"module\",\"__webpack_exports__\",\"__webpack_require__\",\"eval\"],\"mappings\":\"CAACA,OAAqB,aAAIA,OAAqB,cAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAE7DC,IACA,SAAUC,OAAQC,oBAAqBC,qBAE7C,aACAC,KAAK\"}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{768:function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\"default\\\", function() { return Edit; });\\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(47);\\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21);\\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\\n/* harmony import */ var src_model_goods_goods__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(270);\\n/* harmony import */ var _fengqiaogang_dblist__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(111);\\n/* harmony import */ var _fengqiaogang_dblist__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_fengqiaogang_dblist__WEBPACK_IMPORTED_MODULE_3__);\\n/* harmony import */ var _common_basisCopy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(504);\\n/**\\n * @file 编辑商品\\n */\\n\\n\\n\\n\\n\\n// const formProps: any = {\\n//   labelCol: {\\n//     style: {\\n//       width: '120px'\\n//     }\\n//   }\\n// };\\nclass Edit extends _common_basisCopy__WEBPACK_IMPORTED_MODULE_4__[/* default */ \\\"a\\\"] {\\n    onSubmit() {\\n        throw new Error('Method not implemented.');\\n    }\\n    // 提交\\n    constructor(props) {\\n        super(props);\\n        this.state = {};\\n        this.getCategory = this.getCategory.bind(this);\\n    }\\n    getGoodsCategoryList() {\\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \\\"a\\\"])(this, void 0, void 0, function* () {\\n            const data = yield Object(src_model_goods_goods__WEBPACK_IMPORTED_MODULE_2__[/* goodsCategoryList */ \\\"c\\\"])();\\n            this.setState({ categoryList: [].concat(data) });\\n        });\\n    }\\n    componentDidMount() {\\n        const _super = Object.create(null, {\\n            getGoodsCategoryList: { get: () => super.getGoodsCategoryList }\\n        });\\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \\\"a\\\"])(this, void 0, void 0, function* () {\\n            _super.getGoodsCategoryList.call(this);\\n            this.getGoodsCategoryList();\\n            const res = yield this.stateInit();\\n            this.setState(Object.assign({}, res));\\n            this.setState({\\n                categoryList: [].concat(this.state.categoryList),\\n            });\\n            if (this.formRef) {\\n                const { current } = this.formRef;\\n                if (current) {\\n                    // 表单回填\\n                    current.setFieldsValue(res);\\n                }\\n            }\\n            _super.getGoodsCategoryList.call(this);\\n            this.setState({\\n                detail: res.detail\\n            });\\n        });\\n    }\\n    getCategory(categoryId) {\\n        const categoryList = this.state.categoryList;\\n        const emptyDb = new _fengqiaogang_dblist__WEBPACK_IMPORTED_MODULE_3___default.a([], 'id');\\n        const newArr = emptyDb.flatten(categoryList, 'child');\\n        const db = new _fengqiaogang_dblist__WEBPACK_IMPORTED_MODULE_3___default.a(newArr, 'id', 'pid');\\n        const current = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.first(db.select({ id: categoryId }));\\n        console.log(current);\\n        const par = lodash__WEBPACK_IMPORTED_MODULE_1___default.a.first(db.select({ id: current['pid'] || '' }));\\n        if (par && lodash__WEBPACK_IMPORTED_MODULE_1___default.a.keys(par).length) {\\n            return [par['id']];\\n        }\\n        return [];\\n    }\\n    stateInit() {\\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \\\"a\\\"])(this, void 0, void 0, function* () {\\n            const id = this.props.location.query.id;\\n            const res = yield Object(src_model_goods_goods__WEBPACK_IMPORTED_MODULE_2__[/* goodsDetial */ \\\"e\\\"])(id);\\n            const category = this.getCategory(res.goods_category);\\n            console.log(res);\\n            const state = {\\n                name: res.name,\\n                goods_type: res.goods_type,\\n                goods_sku: res.goods_sku,\\n                goods_category: [].concat(category, res.goods_category),\\n                detail: `${res.detail}`,\\n                freight_price: res.freight_price / 100,\\n                stock_deduct: [].concat(res.stock_deduct),\\n                limit_member: [].concat(res.limit_member + ''),\\n                limit_period: [].concat(res.limit_period + ''),\\n                goods_delivery_area: [],\\n                humbnail_img: [].concat(res.humbnail_img),\\n                detail_img: [].concat(res.detail_img),\\n                status: res.status,\\n                previewVisible: false,\\n                addClass: '',\\n                categoryList: [],\\n                classKey: '',\\n                limit_member_value: false,\\n                limit_period_value: false,\\n                isCreate: false,\\n            };\\n            console.log(state);\\n            if (res.limit_member) {\\n                state.limit_member_value = true;\\n            }\\n            else {\\n                state.limit_member = [];\\n            }\\n            if (res.limit_period) {\\n                state.limit_period_value = true;\\n            }\\n            else {\\n                state.limit_period = [];\\n            }\\n            console.log(state);\\n            return state;\\n        });\\n    }\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzY4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL2dvb2RzL2VkaXQudHN4P2ExMDgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSDnvJbovpHllYblk4FcbiAqL1xuXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IENyZWF0ZSBmcm9tICcuL2NyZWF0ZSc7XG5pbXBvcnQgeyBnb29kc0RldGlhbCwgZ29vZHNDYXRlZ29yeUxpc3QgfSBmcm9tICdzcmMvbW9kZWwvZ29vZHMvZ29vZHMnO1xuaW1wb3J0IHsgR29vZHMgYXMgU3RhdGUgfSBmcm9tICcuL2NvbW1vbi9pbnRlcmZhY2UnO1xuaW1wb3J0IERCIGZyb20gJ0BmZW5ncWlhb2dhbmcvZGJsaXN0JztcbmltcG9ydCBHb29kc0Jhc2lzIGZyb20gJy4vY29tbW9uL2Jhc2lzQ29weSc7XG4vLyBjb25zdCBmb3JtUHJvcHM6IGFueSA9IHtcbi8vICAgbGFiZWxDb2w6IHtcbi8vICAgICBzdHlsZToge1xuLy8gICAgICAgd2lkdGg6ICcxMjBweCdcbi8vICAgICB9XG4vLyAgIH1cbi8vIH07XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFZGl0IGV4dGVuZHMgR29vZHNCYXNpczxhbnksIGFueT4ge1xuICBvblN1Ym1pdCgpOiB2b2lkIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cbiAgLy8g5o+Q5LqkXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7fTtcbiAgICB0aGlzLmdldENhdGVnb3J5ID0gdGhpcy5nZXRDYXRlZ29yeS5iaW5kKHRoaXMpO1xuICB9XG4gIGFzeW5jIGdldEdvb2RzQ2F0ZWdvcnlMaXN0KCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnb29kc0NhdGVnb3J5TGlzdCgpO1xuICAgIHRoaXMuc2V0U3RhdGUoe2NhdGVnb3J5TGlzdDogW10uY29uY2F0KGRhdGEpfSk7XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIHN1cGVyLmdldEdvb2RzQ2F0ZWdvcnlMaXN0KCk7XG4gICAgdGhpcy5nZXRHb29kc0NhdGVnb3J5TGlzdCgpO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc3RhdGVJbml0KCk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7Li4ucmVzfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBjYXRlZ29yeUxpc3Q6IFtdLmNvbmNhdCh0aGlzLnN0YXRlLmNhdGVnb3J5TGlzdCksXG4gICAgfSk7XG4gICAgaWYgKHRoaXMuZm9ybVJlZikge1xuICAgICAgY29uc3QgeyBjdXJyZW50IH0gPSB0aGlzLmZvcm1SZWY7XG4gICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICAvLyDooajljZXlm57loatcbiAgICAgICAgY3VycmVudC5zZXRGaWVsZHNWYWx1ZShyZXMpO1xuICAgICAgfVxuICAgIH1cbiAgICBzdXBlci5nZXRHb29kc0NhdGVnb3J5TGlzdCgpO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZGV0YWlsOiByZXMuZGV0YWlsXG4gICAgfSk7XG4gIH1cbiAgXG4gIGdldENhdGVnb3J5KGNhdGVnb3J5SWQ6IG51bWJlcik6IEFycmF5PGFueT4ge1xuICAgIGNvbnN0IGNhdGVnb3J5TGlzdCA9IHRoaXMuc3RhdGUuY2F0ZWdvcnlMaXN0O1xuICAgIGNvbnN0IGVtcHR5RGIgPSBuZXcgREIoW10sICdpZCcpO1xuICAgIGNvbnN0IG5ld0FyciA9IGVtcHR5RGIuZmxhdHRlbihjYXRlZ29yeUxpc3QsICdjaGlsZCcpO1xuICAgIGNvbnN0IGRiID0gbmV3IERCKG5ld0FyciwgJ2lkJywgJ3BpZCcpO1xuICAgIGNvbnN0IGN1cnJlbnQgPSBfLmZpcnN0KGRiLnNlbGVjdCh7aWQ6IGNhdGVnb3J5SWR9KSk7XG4gICAgY29uc29sZS5sb2coY3VycmVudCk7XG4gICAgY29uc3QgcGFyID0gXy5maXJzdChkYi5zZWxlY3Qoe2lkOiBjdXJyZW50WydwaWQnXSB8fCAnJ30pKTtcbiAgICBpZiAocGFyICYmIF8ua2V5cyhwYXIpLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFtwYXJbJ2lkJ11dO1xuICAgIH1cbiAgICByZXR1cm4gW107XG5cbiAgfVxuICBhc3luYyBzdGF0ZUluaXQgKCkge1xuICAgIGNvbnN0IGlkID0gdGhpcy5wcm9wcy5sb2NhdGlvbi5xdWVyeS5pZDtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBnb29kc0RldGlhbChpZCk7XG4gICAgY29uc3QgY2F0ZWdvcnkgPSB0aGlzLmdldENhdGVnb3J5KHJlcy5nb29kc19jYXRlZ29yeSk7XG4gICAgY29uc29sZS5sb2cocmVzKTtcbiAgICBcbiAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgIG5hbWU6IHJlcy5uYW1lLCAvLyDllYblk4HlkI3np7BcbiAgICAgIGdvb2RzX3R5cGU6IHJlcy5nb29kc190eXBlLCAvLyDllYblk4HnsbvlnotcbiAgICAgIGdvb2RzX3NrdTogcmVzLmdvb2RzX3NrdSwgLy8g5ZWG5ZOB6KeE5qC8XG4gICAgICBnb29kc19jYXRlZ29yeTogW10uY29uY2F0KGNhdGVnb3J5LCByZXMuZ29vZHNfY2F0ZWdvcnkpLCAvLyDllYblk4Hnsbvnm65JRFxuICAgICAgZGV0YWlsOiBgJHtyZXMuZGV0YWlsfWAsIC8vIOWVhuWTgeivpuaDhVxuICAgICAgZnJlaWdodF9wcmljZTogcmVzLmZyZWlnaHRfcHJpY2UgLyAxMDAsIC8vIOi/kOi0uVxuICAgICAgc3RvY2tfZGVkdWN0OiBbXS5jb25jYXQocmVzLnN0b2NrX2RlZHVjdCksIC8vIOWHj+W6k+WtmOaWueW8j1xuICAgICAgbGltaXRfbWVtYmVyOiBbXS5jb25jYXQocmVzLmxpbWl0X21lbWJlciArICcnKSwgLy8g6LSt5Lmw6ZmQ5Yi25pa55byPXG4gICAgICBsaW1pdF9wZXJpb2Q6IFtdLmNvbmNhdChyZXMubGltaXRfcGVyaW9kICsgJycpLCAgIC8vIOi0reS5sOWRqOacn+mZkOWItuaWueW8j1xuICAgICAgZ29vZHNfZGVsaXZlcnlfYXJlYTogW10sIC8vIOmFjemAgeWcsOWMulxuICAgICAgaHVtYm5haWxfaW1nOiBbXS5jb25jYXQocmVzLmh1bWJuYWlsX2ltZyksIC8vIOWVhuWTgee8qeeVpeWbvlxuICAgICAgZGV0YWlsX2ltZzogW10uY29uY2F0KHJlcy5kZXRhaWxfaW1nKSwgLy8g5ZWG5ZOB6K+m5oOF5Zu+XG4gICAgICBzdGF0dXM6IHJlcy5zdGF0dXMsIC8vIOWVhuWTgeeKtuaAgVxuICAgICAgcHJldmlld1Zpc2libGU6IGZhbHNlLCAvLyDmt7vliqDnsbvnm65cbiAgICAgIGFkZENsYXNzOiAnJywgLy8g5re75Yqg57G755uu5pWw5o2uXG4gICAgICBjYXRlZ29yeUxpc3Q6IFtdLFxuICAgICAgY2xhc3NLZXk6ICcnLFxuICAgICAgbGltaXRfbWVtYmVyX3ZhbHVlOiBmYWxzZSxcbiAgICAgIGxpbWl0X3BlcmlvZF92YWx1ZTogZmFsc2UsXG4gICAgICBpc0NyZWF0ZTogZmFsc2UsXG4gICAgfTtcbiAgICBjb25zb2xlLmxvZyhzdGF0ZSk7XG4gICAgXG4gICAgaWYgKHJlcy5saW1pdF9tZW1iZXIpIHtcbiAgICAgIHN0YXRlLmxpbWl0X21lbWJlcl92YWx1ZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLmxpbWl0X21lbWJlciA9IFtdO1xuICAgIH1cbiAgICBpZiAocmVzLmxpbWl0X3BlcmlvZCkge1xuICAgICAgc3RhdGUubGltaXRfcGVyaW9kX3ZhbHVlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUubGltaXRfcGVyaW9kID0gW107XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHN0YXRlKTtcbiAgICBcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn1cblxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFFQTs7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///768\\n\")}}]);","extractedComments":[]}